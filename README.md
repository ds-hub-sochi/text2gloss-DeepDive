# text2gloss

Данная программа предназначена для перевода слов на русский язык жестов.
На вход подаются слова на русском языке, на выходе в файле result.json записываются входные слова как ключи, 
а качестве значений записываются наиболее похожие слова на РЯЖ из словаря глоссов  
В основе работы программы лежит модель word2vec c векторными представлениями более, чем 3.3 млн слов русского языка.
Ключевая задача найти в данном словаре глоссов наиболее похожие слова из входных данных.

# Как запустить программу

Создаем новый проект с виртуальным окружением на базе anaconda3  
Можно использовать другие окружения которые в которые можно успешно установить библиотеки из requirements.txt  

Инициализируем репозиторий командой **git init**  
Клонируем репозиторий с файлами программы "git clone https://github.com/ds-hub-sochi/text2gloss-DeepDive.git"

Устанавливаем библиотеки **pip install -r requirements.txt**  
Или обновляем текущие до версий из файла **pip install -r requirements.txt --upgrade**  

В windows может возникнуть ошибка в совместимости версий pymorphy2 и свежей версией python, а именно  
с отсутствием функции inspect.getargspec() в более новых версиях Python.  
Если ошибок после запуска кода в **main.py** не возникает, то делать ничего не нужно, если ругается на getargspec(),  
то сделайте следующие шаги:  

Откройте файл **C:\Users\User\AppData\Roaming\Python\Python311\site-packages\pymorphy2\units\base.py**
в текстовом редакторе и замените:

    args, varargs, varkw, defaults = inspect.getargspec(cls.__init__)
на

    signature = inspect.signature(cls.__init__)
    args = [p.name for p in signature.parameters.values()]

После внесения данных изменений сохраните файл. Теперь все должно работать корректно

в папку **input data** необходимо загрузить текстовый файл со словами для перевода на язык жестов.  
Каждое слово (глосс) должно быть в новой строке.  
Несколько слов через пробел в одной строке будет восприниматься программой как составной глосс.

Файл main.py содержит клиентский код  
Для загрузки новых входных данных необходимо указать имя нового тестового файла в **input data**  
`
    preparator_test = DataPreparator(model=model,
                                     input_filename="input_data/test.txt",
                                     output_filename="vected_data/test.json")
`  

Словарь глоссов, на котором тестирутся проект уже загружен, можно попробовать другой словарь.  
Требование к входному файлу такие же как и для тестовых данных

Теперь просто запускаем файл main.py

# Что делает программа

Сначала программа загружает модель векторного представления слов с сайта:  
http://vectors.nlpl.eu/repository/20/
Если модель уже загружена в ./models/65/ тогда загрузка не произойдет и программа будет работать с уже загруженной моделью

Программа обработает словарь и тестовые данные.  
Программа различает составные глоссы и может выделить в отлдельные слова  
слова - синонемы написанные через "/"  
После обработки мы получим два файла с векторными представленями в формате .json,  
где ключ - слово, а значение - его векторное представление Они сохранены в папке **vected_data**  

На след этапе программа будет выполнять поиск похожих слов в словаре.  

1. Сначала находит все слова по точному совпадению.
2. Для слов которых нет в словаре глоссов, программа находит 10 наиболее близких по значению слова в словаре по косинусному  
   расстоянию векторых представлений слов. Если косинусное расстояние меньше 0.5, то близких по значению слов вловаре нет
3. Среди ТОП10 (или меньше) близких по значению слов, программа пытается найти однокоренные слова с потомщью алгоритма  
   "расстояние Левенштейна"
   * Если однокоренных слов нет, то возвращает наиболее близкое по косинусному расстоянию слово.
   * Если находит только 1 однокоренное, то возвращает однокоренное
   * Если найдено несколько однокоренных слов среди ТОП 10, то возращает наиболее близкое по по  
      косинусному расстоянию однокоренное слово.

Все слова записываются в result.json, где ключ - слово из входного файла, а значение - наиболее подходящее слово  
из словаря глоссов. Если подходящее слово в словаре глоссов не найдено, то значение будет None

